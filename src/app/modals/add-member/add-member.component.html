@if (open) {
  <div class="modal-overlay" (click)="close()">
    <div class="modal-box" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>Add New Member</h2>
        <button class="btn-close" (click)="close()">âœ•</button>
      </div>

      <form (ngSubmit)="onSubmit()" #addForm="ngForm" class="modal-form">
        <div class="form-row">
          <div class="form-group">
            <label>First Name *</label>
            <input type="text" name="firstName" [(ngModel)]="form.firstName" placeholder="First name" required />
          </div>
          <div class="form-group">
            <label>Last Name *</label>
            <input type="text" name="lastName" [(ngModel)]="form.lastName" placeholder="Last name" required />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Username *</label>
            <input type="text" name="username" [(ngModel)]="form.username" placeholder="Username" required />
          </div>
          <div class="form-group">
            <label>City *</label>
            <input type="text" name="city" [(ngModel)]="form.city" placeholder="City" required />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Birth Date *</label>
            <input type="date" name="birthdate" [(ngModel)]="form.birthdate" required />
          </div>
          <div class="form-group">
            <label>Phone *</label>
            <input type="text" name="phone" [(ngModel)]="form.phone" placeholder="Phone number" required />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Email</label>
            <input type="email" name="email" [(ngModel)]="form.email" placeholder="Email address" />
          </div>
          <div class="form-group">
            <label>Role</label>
            <select name="userType" [(ngModel)]="form.userType">
              <option value="">Select role</option>
              <option value="Admin">Admin</option>
              <option value="User">User</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Password *</label>
            <input type="password" name="password" [(ngModel)]="form.password" placeholder="Password" required />
          </div>
          <div class="form-group">
            <label>Confirm Password *</label>
            <input type="password" name="confirmPassword" [(ngModel)]="form.confirmPassword" placeholder="Confirm password" required />
          </div>
        </div>

        @if (errorMessage()) {
          <div class="alert alert-error">{{ errorMessage() }}</div>
        }
        @if (successMessage()) {
          <div class="alert alert-success">{{ successMessage() }}</div>
        }

        <div class="modal-footer">
          <button type="button" class="btn-cancel" (click)="close()">Cancel</button>
          <button type="submit" class="btn-submit" [disabled]="isLoading()">
            {{ isLoading() ? 'Adding...' : 'Add Member' }}
          </button>
        </div>
      </form>
    </div>
  </div>
}
